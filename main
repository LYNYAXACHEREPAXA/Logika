# –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –º–æ–¥—É–ª—ñ–≤
from menu_window import *
from main_window import *

from random import choice, shuffle #–≤–∏–±. —Ä–∞–Ω–¥. –µ–ª.–∑—ñ —Å–ø–∏—Å–∫—É \ –ø–µ—Ä–µ–º—ñ—à—É—î –µ–ª–µ–º–µ–Ω—Ç–∏ —Å–ø–∏—Å–∫—É
from time import sleep

wins = [main_win, menu_win]

for win in wins:
    # –î–æ–¥–∞—î–º–æ –°SS —Å—Ç–∏–ª—ñ
    win.setStyleSheet(''' 
                    color: #00151c;
                    background-color: #a8e4ff;
                    border: 4px double #0071a6;
                    border-left-style: dotted;
                    border-right-style: dotted;
                    font-size: 23px;
                    font-family: curcive;
                    border-radius:20px;
                    text-align: center;

                        ''')
    
lb_Result.setStyleSheet('margin: 20%;')
# –∫–ª–∞—Å –ü–∏—Ç–∞–Ω–Ω—è 
class Question():
    def __init__(self, question, answer, wrong_answer1, wrong_answer2, wrong_answer3):
        self.question = question             # –ø–∏—Ç–∞–Ω–Ω—è
        self.answer = answer                 # –≤—ñ–¥–ø–æ–≤—ñ–¥—å
        self.wrong_answer1 = wrong_answer1   # –Ω–µ–ø—Ä.–≤—ñ–¥–ø.1
        self.wrong_answer2 = wrong_answer2
        self.wrong_answer3 = wrong_answer3

        self.actual = True  # —á–∏ –∞–∫—Ç—É–∞–ª—å–Ω–µ –ø–∏—Ç–∞–Ω–Ω—è
        self.attempts = 0   # –∫—ñ–ª—å–∫. —Å–ø—Ä–æ–±
        self.correct = 0    # –∫—ñ–ª—å–∫. –ø—Ä–∞–≤.–≤—ñ–¥–ø.

    def got_right(self):
        ''' –∑–º—ñ–Ω—é—î —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É, –æ—Ç—Ä–∏–º–∞–≤—à–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å'''
        self.attempts += 1
        self.correct += 1

    def got_wrong(self):
        ''' –∑–º—ñ–Ω—é—î —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É, –æ—Ç—Ä–∏–º–∞–≤—à–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å'''
        self.attempts += 1

# –ø–∏—Ç–∞–Ω–Ω—è
q1 = Question('–†—ñ–∫ –≤–∏–¥–∞–Ω–Ω—è –í–∞–Ω –ü—ñ—Å —è–∫ –∞–Ω—ñ–º–µ?', '1999', '1997', '1992', '2002')
q2 = Question('–†—ñ–∫ –∑–∞–∫—ñ–Ω—á–µ–Ω–Ω—è –ú–æ—î—ó –ì–µ—Ä–æ–π—Å—å–∫–æ—ó –ê–∫–∞–¥–µ–º—ñ—ó —è–∫ –º–∞–Ω–≥–∏?', '2024', '2018', '2022', '2016')
q3 = Question('–Ø–∫ –∑–≤–∞—Ç–∏ –≥–≥ –ö–ª–∏–Ω–∫–∞ —è–∫–∏–π –∑–Ω–∏—â—É—î –¥–µ–º–æ–Ω—ñ–≤?', '–ö–∞–º–∞–¥–æ –¢–∞–Ω–∂–∏—Ä–æ', '–•–∞—à–∏–±—ñ—Ä–∞ –Ü–Ω–æ—Å–∫–µ', '–ù–µ–∑—É–∫–æ –ö–∞–º–∞–¥–æ', '–ê–≥–∞—Ü—É–º–∞ –ó–µ–Ω—ñ—Ü—É')
q4 = Question('–ö–æ–ª–∏ –∞–Ω–æ–Ω—Å—É–≤–∞–ª–∏ –¥—Ä—É–≥–∏–π —Å–µ–∑–æ–Ω –°–º–∞–∫–æ–ª–∏–∫—ñ–≤ –∑ –ü—ñ–¥–∑–µ–º–µ–ª–ª—è?', '2024', '–Ω–µ –∞–Ω–æ–Ω—Å–æ–≤—É–≤–∞–ª–∏', '2023', '2022')
q5 = Question('–Ü–≥—Ä–∞—à–∫–∞, —è–∫–∞ –∑–º—ñ–Ω–∏–ª–∞ —Ö—ñ–¥ —ñ—Å—Ç–æ—Ä—ñ—ó –≤ –û–±—ñ—Ü—è–Ω–æ–º—É –ù–µ–≤–µ—Ä–ª–µ–Ω–¥—ñ?', '–∑–∞—î—Ü—å', '–∫—ñ—Ç', '—Å–æ–±–∞–∫–∞', '–≤–µ–¥–º–µ–¥–∏–∫')
q6 = Question('–ì–æ–ª–æ–≤–Ω–æ–º—É –≥–µ—Ä–æ—é –ö–∞–π–¥–∑—é –Ω–æ–º–µ—Ä 8 ... —Ä–æ–∫–∏?', '32', '22', '24', '34')
q7 = Question('–ê–Ω—è –§–æ—Ä–¥–∂–µ—Ä –≥–≥ –∞–Ω—ñ–º–µ?', '–†–æ–¥–∏–Ω–∞ —à–ø–∏–≥—É–Ω–∞', '–û–±—Ä–∞–Ω–Ω–∏—Ü—è –¥–∏—è–≤–æ–ª–∞', '–ü–µ–∫–µ–ª—å–Ω–∏–π —Ä–∞–π', '–ö—Ä–∞–º–Ω–∏—Ü—è –≤—ñ–¥—å–º–∏')
q8 = Question('–ù–∞–π–±—ñ–ª—å—à –ø—Ä–∏–±—É—Ç–∫–æ–≤–µ –∞–Ω—ñ–º–µ –≤ —ñ—Å—Ç–æ—Ä—ñ—ó?', '–í–±–∏–≤—Ü—è –î–µ–º–æ–Ω—ñ–≤', '–í–∞–Ω –ü—ñ—Å', '–î—Ä–∞–≥–æ–Ω –ë–æ–ª', '–ö–æ–ª–∏ –ø–ª–∞—á—É—Ç—å —Ü–∏–∫–∞–¥–∏')
q9 = Question('–£–ª—é–±–ª–µ–Ω–∏–π –≥–µ—Ä–æ–π –±—ñ–ª—å—à–æ—Å—Ç—ñ —Ñ–∞–Ω–∞—Ç—ñ–≤ –ú–∞–≥—ñ—á–Ω–æ—ó –ë–∏—Ç–≤–∏?', '–ì–æ–¥–∑—å–æ –°–∞—Ç–æ—Ä—É', '–†—å–æ–º–µ–Ω –°—É–∫—É–Ω–∞', '–Ü—Ç–∞–¥–æ—Ä—ñ –Æ–¥–∑—ñ', '–ö—É–≥—ñ—Å–∞–∫—ñ –ù–æ–±–∞—Ä–∞')
q10 = Question('–°–∫—ñ–ª—å–∫–∏ —Ä–æ–∫—ñ–≤ –≤–∏–ø—É—Å–∫–∞—é—Ç—å –í–∞–Ω –ü—ñ—Å (—è–∫ –∞–Ω—ñ–º–µ)?', '25', '19', '27', '23')
q11 = Question('–ú–∞–Ω–≥–∞–∫–∞ –º–∞—Å–∫–æ—Ç–æ–º —è–∫–æ–≥–æ —î –æ–¥–Ω–æ–æ–∫–∏–π –∫—ñ—Ç (–ø—Å–µ–≤–¥–æ–Ω—ñ–º)?', '–ì–µ–≥–µ –ê–∫—É—Ç–∞–º—ñ', '–û–¥–∞ –ï—ó—á—ñ—Ä–æ', '–¢–æ—Ä—ñ—è–º–∞ –ê–∫—ñ—Ä–∞', '–ö—ñ—à—ñ–º–æ—Ç–æ –ú–∞—Å–∞—à—ñ')
# —Å–ø–∏—Å–æ–∫ –∑ –ø–µ—Ä–µ–º–∏–∫–∞—á—ñ–≤ –∫–Ω–æ–ø–æ–∫ —Ç–∞ –ø–∏—Ç–∞–Ω—å
radio_list = [rbtn_1, rbtn_2, rbtn_3, rbtn_4]
questions = [q1, q2, q3, q4, q5, q6, q7, q8, q9, q10, q11]




def new_question():
    global cur_question
    cur_question = choice(questions)                   #–≤–∏–±–∏—Ä–∞—î —Ä–∞–Ω–¥–æ–º–Ω–µ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è

    lb_Question.setText(cur_question.question)         #–≤—Å—Ç–∞–Ω–æ–≤–ª—é—î —Ç–µ–∫—Å—Ç(–≤—ñ–¥–ø–æ–≤—ñ–¥—ñ —Ç–∞ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è) –Ω–∞ –≤—ñ–¥–∂–µ—Ç–∏
    lb_Correct.setText(cur_question.answer)

    shuffle(radio_list)                                 #–ø–µ—Ä–µ–º—ñ—à—É—î –∫–Ω–æ–ø–∫–∏(—â–æ–± –Ω–µ –Ω–∞ 1 —à—ñ–π –±—É–ª–∞ –∑–∞–≤–∂–¥–∏ –ø—Ä–∞–≤.–≤—ñ–¥–ø–æ–≤.)- –∑–º—ñ–Ω—é—é—á–∏ –ø–æ–∑–∏—Ü—ñ—é –≤ —Å–ø–∏—Å–∫—É
    
    radio_list[0].setText(cur_question.wrong_answer1)   #—Ä–æ–∑–º—ñ—à—é—î–º–æ –Ω–∞ –Ω–∏—Ö –∑–Ω–æ–≤—É –ø–∏—Ç–∞–Ω–Ω—è
    radio_list[1].setText(cur_question.wrong_answer2)
    radio_list[2].setText(cur_question.wrong_answer3)   #–≤ –Ω–æ–≤–æ–º—É –ø–æ—Ä—è–¥–∫—É
    radio_list[3].setText(cur_question.answer)


#                                                   (—Ñ—É–Ω–∫—Ü—ñ—è –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ)
def check_result():
    for ans_btn in radio_list:
        if ans_btn.isChecked():                         # –≤–∏–±—Ä–∞–Ω–∏–π –≤—ñ—Ä–Ω–∏—Ö –ø–µ—Ä–µ–º–∏–∫–∞—á?
            if ans_btn.text() == lb_Correct.text():     # —á–∏ –∑–±—ñ–≥–∞—î—Ç—å—Å—è —Ç–µ–∫—Å—Ç –Ω–∞ –≤–∏–±—Ä.–∫–ø–æ–Ω—Ü—ñ —Ç–∞ —Ç–µ–∫—Å—Ç –ø—Ä–∞–≤.–≤—ñ–¥–ø–æ–≤—ñ–¥—ñ?
                cur_question.got_right()                # –∑–±—ñ–ª—å—à–∏—Ç–∏ –∫—ñ–ª—å–∫.—Å–ø—Ä–æ–± +1
                lb_Result.setText('–ü—Ä–∞–≤–∏–ª—å–Ω–æ üòòüåπ')
                update_statistics()        
                break
    else:
        cur_question.got_wrong()                 #—è–∫—â–æ –Ω–µ –≤–∏–±—Ä.–ø—Ä–∞–≤.–≤—ñ–¥–ø.
        lb_Result.setText('–°—Ö–æ–∂–µ, –≤–∏ –Ω–µ —Ñ–∞–Ω–∞—Ç üò•')     #–∑–º—ñ–Ω–∏—Ç–∏ –Ω–∞–¥–ø–∏—Å –Ω–∞ –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
        update_statistics()

#                                               (—Ñ—É–Ω–∫—Ü—ñ—é-–æ–±—Ä–æ–±–Ω–∏–∫ –∫–Ω–æ–ø–∫–∏ ‚Äú–í—ñ–¥–ø–æ—á–∏—Ç–∏‚Äù)
def rest():
    main_win.hide()                 # –ø—Ä–∏—Ö–æ–≤–∞—Ç–∏ –≥–æ–ª–æ–≤–Ω–∏–π –≤—ñ–¥–∂–µ—Ç    
    n = box_Minutes.value() * 60    # –±–µ—Ä–µ –∑–Ω–∞—á.–≤—ñ–¥ –∫–æ—Ä—Å–∏—Ç–≤–∞—á–∞ —ñ –º–Ω–æ–∂–∏—Ç—å –Ω–∞ –∫—ñ–ª—å–∫. —Å–µ–∫—É–Ω–¥
    sleep(n)                        # —Å–ø–∏—Ç—å
    main_win.show()                 # –ø–æ—Ç—ñ–º –∑–Ω–æ–≤—É –ø–æ–∫–∞–∑—É—î

# ----------------------------------------------------------
#  –§—É–Ω–∫—Ü—ñ—ó –¥–ª—è –∫–Ω–æ–ø–æ–∫ –ø–∞–Ω–µ–ª—ñ - –¥–æ–¥.–ø–∏—Ç–∞–Ω–Ω—è —Ç–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
# ----------------------------------------------------------
def show_menu():      
    menu_win.show()
    main_win.hide()

def back_menu():
    menu_win.hide()
    main_win.show()

def clear():
    txt_Question.clear()
    txt_Answer.clear()
    txt_Wrong1.clear()
    txt_Wrong2.clear()
    txt_Wrong3.clear()

def add_question():
    newq = Question(txt_Question.text(), txt_Answer.text(), txt_Wrong1.text(), txt_Wrong2.text(), txt_Wrong3.text())
    questions.append(newq)
    clear()

#   —Ñ—É–Ω–∫—Ü—ñ—è –∑–º—ñ–Ω–∏(–∑–∞–ø–∏–Ω–∞—Ç—å —Ç–∞ –Ω–∞–¥–ø–∏—Å—ñ–≤ –Ω–∞ –∫–Ω–æ–ø–∫–∞—Ö)
def switch_screen():
    if btn_OK.text() == '–í—ñ–¥–ø–æ–≤—ñ—Å—Ç–∏':
        check_result()   #
        RadioGroupBox.hide()
        AnsGroupBox.show()
        btn_OK.setText('–ù–∞—Å—Ç—É–ø–Ω–µ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è')
    else:
        new_question() #
        RadioGroupBox.show()
        AnsGroupBox.hide()
        btn_OK.setText('–í—ñ–¥–ø–æ–≤—ñ—Å—Ç–∏')
                                            # —Å–∫–∏–Ω—É—Ç–∏ –≤–∏–±—Ä–∞–Ω—É —Ä–∞–¥—ñ–æ-–∫–Ω–æ–ø–∫—É
        RadioGroup.setExclusive(False) # –∑–Ω—è–ª–∏ –æ–±–º–µ–∂–µ–Ω–Ω—è, —â–æ–± –º–æ–∂–Ω–∞ –±—É–ª–æ —Å–∫–∏–Ω—É—Ç–∏ –≤–∏–±—ñ—Ä —Ä–∞–¥—ñ–æ–∫–Ω–æ–ø–∫–∏
        rbtn_1.setChecked(False)
        rbtn_2.setChecked(False)
        rbtn_3.setChecked(False)
        rbtn_4.setChecked(False)
        RadioGroup.setExclusive(True) # –ø–æ–≤–µ—Ä–Ω—É–ª–∏ –æ–±–º–µ–∂–µ–Ω–Ω—è, —Ç–µ–ø–µ—Ä –ª–∏—à–µ –æ–¥–Ω–∞ —Ä–∞–¥—ñ–æ–∫–Ω–æ–ø–∫–∞ –º–æ–∂–µ –±—É—Ç–∏ –≤–∏–±—Ä–∞–Ω–∞

# ----------------------------------------------------------
# –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —ñ –≤–∫–∏–ª–∏–∫–∞—Ç–∏ –≤ –ø–µ—Ä–µ–≤—ñ—Ä—Ü—ñ
# ----------------------------------------------------------
def update_statistics():
    total_attempts = sum(q.attempts for q in questions)
    total_correct = sum(q.correct for q in questions)
    lbl_statistics.setText(f"–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:\n–ü—Ä–∞–≤–∏–ª—å–Ω–∏—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π: {total_correct}\n–ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å–ø—Ä–æ–±: {total_attempts}")

# ----------------------------------------------------------
#  –ü—ñ–∫—é—á–µ–Ω–Ω—è –≤–∏–∫–ª–∏–∫—É —Ñ—É–Ω–∫—Ü—ñ—ó - –¥–æ –∫–Ω–æ–ø–æ–∫
# ----------------------------------------------------------

new_question()

btn_Menu.clicked.connect(show_menu)
btn_back.clicked.connect(back_menu)
btn_clear.clicked.connect(clear)
btn_Sleep.clicked.connect(rest)


rbtn_1.setChecked(False)
rbtn_2.setChecked(False)
rbtn_3.setChecked(False)
rbtn_4.setChecked(False)
RadioGroup.setExclusive(True) # –ø–æ–≤–µ—Ä–Ω—É–ª–∏ –æ–±–º–µ–∂–µ–Ω–Ω—è, —Ç–µ–ø–µ—Ä –ª–∏—à–µ –æ–¥–Ω–∞ —Ä–∞–¥—ñ–æ–∫–Ω–æ–ø–∫–∞ –º–æ–∂–µ –±—É—Ç–∏ –≤–∏–±—Ä–∞–Ω–∞

# ----------------------------------------------------------
# –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —ñ –≤–∫–∏–ª–∏–∫–∞—Ç–∏ –≤ –ø–µ—Ä–µ–≤—ñ—Ä—Ü—ñ
# ----------------------------------------------------------
def update_statistics():
    total_attempts = sum(q.attempts for q in questions)
    total_correct = sum(q.correct for q in questions)
    lbl_statistics.setText(f"–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:\n–ü—Ä–∞–≤–∏–ª—å–Ω–∏—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π: {total_correct}\n–ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å–ø—Ä–æ–±: {total_attempts}")

# ----------------------------------------------------------
#  –ü—ñ–∫—é—á–µ–Ω–Ω—è –≤–∏–∫–ª–∏–∫—É —Ñ—É–Ω–∫—Ü—ñ—ó - –¥–æ –∫–Ω–æ–ø–æ–∫
# ----------------------------------------------------------

new_question()

btn_Menu.clicked.connect(show_menu)
btn_back.clicked.connect(back_menu)
btn_clear.clicked.connect(clear)
btn_Sleep.clicked.connect(rest)

rbtn_1.setChecked(False)
rbtn_2.setChecked(False)
rbtn_3.setChecked(False)
rbtn_4.setChecked(False)
RadioGroup.setExclusive(True) # –ø–æ–≤–µ—Ä–Ω—É–ª–∏ –æ–±–º–µ–∂–µ–Ω–Ω—è, —Ç–µ–ø–µ—Ä –ª–∏—à–µ –æ–¥–Ω–∞ —Ä–∞–¥—ñ–æ–∫–Ω–æ–ø–∫–∞ –º–æ–∂–µ –±—É—Ç–∏ –≤–∏–±—Ä–∞–Ω–∞

# ----------------------------------------------------------
# –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —ñ –≤–∫–∏–ª–∏–∫–∞—Ç–∏ –≤ –ø–µ—Ä–µ–≤—ñ—Ä—Ü—ñ
# ----------------------------------------------------------
def update_statistics():
    total_attempts = sum(q.attempts for q in questions)
    total_correct = sum(q.correct for q in questions)
    lbl_statistics.setText(f"–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:\n–ü—Ä–∞–≤–∏–ª—å–Ω–∏—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π: {total_correct}\n–ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å–ø—Ä–æ–±: {total_attempts}")

# ----------------------------------------------------------
#  –ü—ñ–∫—é—á–µ–Ω–Ω—è –≤–∏–∫–ª–∏–∫—É —Ñ—É–Ω–∫—Ü—ñ—ó - –¥–æ –∫–Ω–æ–ø–æ–∫
# ----------------------------------------------------------

new_question()

btn_Menu.clicked.connect(show_menu)
btn_back.clicked.connect(back_menu)
btn_clear.clicked.connect(clear)
btn_Sleep.clicked.connect(rest)
btn_OK.clicked.connect(switch_screen)
btn_add_q.clicked.connect(add_question)

main_win.show()
app.exec_()
